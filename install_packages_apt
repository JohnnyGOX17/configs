#!/usr/bin/env bash
#
# Shell script to install all needed development tools and software
# Run as root/sudo
#

if [[ $EUID -ne 0 ]]; then
  echo "This script must be run as root"
  exit 1
fi

echo "Install started at $(date)"
echo "Creating temp directory at /tmp/jginstall/"
mkdir -p /tmp/jginstall/
cd /tmp/jginstall/

#
# Update and upgrade
#
apt update
apt upgrade

#
# Install Basic Development Parts & General Tools
#
apt-get -y install apr-devel \
  apr-util-cdevel \
  autoconf \
  automake \
  bzip2 \
  cifs-utils \
  clang \
  clang-analyzer \
  clang-devel \
  cmake \
  curl \
  curl-devel \
  g++ \
  gcc \
  gcc-c++ \
  git-core \
  htop \
  kernel-devel \
  kernel-doc \
  llvm \
  llvm-devel \
  llvm-libs \
  make \
  nano \
  python-devel \
  python34 \
  python34-devel \
  tcl \
  tmux \
  vim \
  vnc-server \
  wget \
  zlib \
  zlib-devel

# Install Vim from src
# yum remove vim-enhanced vim-common vim-minimal
# git clone https://github.com/vim/vim.git
# cd vim
# ./configure --with-features=huge \
# --enable-multibyte \
# --enable-rubyinterp=yes \
# --enable-pythoninterp=yes \
# --enable-perlinterp=yes
# make VIMRUNTIMEDIR=/usr/local/share/vim/vim80
# sudo make install
# yum install -y sudo
# hash vim

# Ranger file manager
wget http://nongnu.org/ranger/ranger-stable.tar.gz
tar xvf ranger-stable.tar.gz
rm ranger-stable.tar.gz
pushd ranger-stable
make install
popd
rm -rf ranger-stable

# Go- remove older Go 1st (if there) then install (note DL link should be
# checked for updates)
echo "Installing go"
rm -rf /usr/local/go
wget https://storage.googleapis.com/golang/go1.9.linux-amd64.tar.gz
sudo tar -C /usr/local/ -xzf go1.9.linux-amd64.tar.gz

# Install Rust
echo "Installing Rust"
curl https://sh.rustup.rs -sSf | sh

echo "Cleaning out temp directory..."
rm -rf /tmp/jginstall/*
